@use "sass:color";
@import url("https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&display=swap");

:root { --hero-title-bg: rgba(60, 102, 168, 0.1); }   /* light */
html.dark { --hero-title-bg: rgba(60, 102, 168, 0.16); } /* dark */

.vp-blog-hero-title {
  font-family: "Shippori Mincho", "Hiragino Mincho ProN", "Yu Mincho", "游明朝", serif !important;
  color: #eef1f4 !important;
  font-size: 2.6rem;          /* 少し控えめ */
  font-weight: 400;
  letter-spacing: 0.2px;
  text-align: center;
  text-shadow: none;          /* ギラつきを除去 */
  margin: 1rem auto .2rem;
  padding: .4rem .9rem;
  display: inline-block;
}


/* tagline */
.vp-blog-hero-description {
  font-family: "Shippori Mincho", "Hiragino Mincho ProN", "Yu Mincho", "游明朝", serif !important;
  color: #ffffff !important;
  margin-top: 0rem;   // 上の余白をほぼゼロに
  font-size: 1.2rem;
  font-weight: 400;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

p {
  font-size: 1rem;
  line-height: 1.65;
}

// ===== heading ===== //
.vp-page-title {
  h1 {
    font-size: 2rem;
    font-weight: 800;
    text-align: center;
    color: #3c66a8; /* 落ち着いた濃紺 */
    border-bottom: 2px dashed #94a3b8; /* グレー系の点線 */
    padding-bottom: 0.3em;
    margin-bottom: 1.2em;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
  }
}

/* h2 */
// h2 span {
//   display: inline-block;
//   padding: 0.4em 1em;                 /* h3よりやや広め */
//   background: #f9fbfe;                /* 単色で落ち着かせる */
//   border-left: 4px solid #3c66a8;     /* h3と同じ太さ */
//   border-radius: 6px;
//   color: #2d4f7c;
//   font-weight: 700;                   /* h3より少し強調 */
//   font-size: 1.4rem;                  /* h3より大きいが控えめ */
// }
:root{
  --h2-underline: #3b82f6;
  --h3-underline: #60a5fa;
}
html.dark{
  --h2-underline: #60a5fa;
  --h3-underline: #93c5fd;
}

/* h2 */
h2 span {
  display: inline-block;
  position: relative;
  padding: 0 0 .25em 0;     /* 下線分の余白 */
  background: none;         /* 旧スタイル無効化 */
  border: 0;
  color: #2d4f7c;
  font-weight: 700;
  font-size: 1.4rem;
}
h2 span::after{
  content:"";
  position:absolute; left:0; right:0; bottom:0;
  height:4px;
  background: linear-gradient(to right, var(--h2-underline), transparent);
}

/* h3 */
h3 span {
  display: inline-block;
  position: relative;
  padding: 0 0 .22em 0;
  background: none;
  border: 0;
  color: #2d4f7c;
  font-weight: 600;
}
h3 span::after{
  content:"";
  position:absolute; left:0; right:0; bottom:0;
  height:3px;
  background: linear-gradient(to right, var(--h3-underline), transparent);
}

h4 span {
  font-size: 1.1rem;
  font-weight: 600;
  color: #2d4f7c;
  margin-top: 0.6em;
  margin-bottom: 0.4em;
}

// ===== details ===== //
.hint-container.details > summary {
  background: #f9fbfe;
  color: #2d4f7c;
  font-weight: 600;
  padding: 1em 2.5em;
  margin: 0.8em 0;
  border: 1px solid #d4dce7;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  cursor: pointer;
  transition: background 0.6s ease, color 0.6s ease;
}

.hint-container.details > summary:hover {
  background: #2d4f7c;  /* 元の文字色を背景に */
  color: #f9fbfe;       /* 元の背景を文字色に */
}

/* 明: しっかり可視 / 暗: 薄めだが消えない */
:root {
  --mark-bg: rgba(255,245,157,.38); /* light */
  --mark-cut: 62%;                  /* どこから塗るか */
}
html.dark {
  --mark-bg: rgba(255,245,157,.14); /* dark */
  --mark-cut: 72%;
}

:where(p, li, dd, blockquote) mark{
  color: currentColor;
  background: linear-gradient(transparent var(--mark-cut),
                              var(--mark-bg) var(--mark-cut));
  border-radius: 4px;
  padding: 0 2px;
}

/* コード内は除外 */
code mark, pre mark { background: none; padding: 0; }


// ==== box ===== //

/* ベース */
@mixin box27($c) {
  position: relative;
  margin: 2em 0;
  padding: .5em 1em;
  border: 3px solid $c;

  > .custom-container-title{
    position: absolute; display: inline-block;
    top: -27px; left: -3px;
    padding: 0 9px; height: 25px; line-height: 25px; font-size: 17px;
    background: $c; color: #fff; font-weight: bold; border-radius: 5px 5px 0 0;
    margin: 0; white-space: nowrap;
  }

  /* 本文タイポグラフィ */
  > :not(.custom-container-title) {
    line-height: 1.75;         /* 行間 */
  }
  /* 連続要素の上下間隔 */
  > *:not(.custom-container-title) + * {
    margin-top: .6em;
  }

  /* 段落とリストの微調整 */
  p { margin: .4em 0; }
  ul, ol { padding-left: 1.2em; margin: .4em 0; }
  li { margin: .25em 0; }

  /* コードや数式ブロックが詰まる場合 */
  pre, .katex-display, mjx-container[display="true"] {
    margin: .7em 0;
    line-height: 1.6;
  }
}

/* 青パレット */
$blue-300: #93c5fd; /* 明るい */
$blue-400: #60a5fa;
$blue-500: #3b82f6; /* 基準 */
$blue-600: #2563eb;
$blue-700: #1d4ed8; /* 濃い */
$blue-gray: #64748b; /* 文字/参考系 */

.custom-container.def   { @include box27($blue-400); }
.custom-container.expl  { @include box27($blue-300); }
.custom-container.hint  { @include box27($blue-500); }
.custom-container.plan  { @include box27($blue-500); }
.custom-container.note  { @include box27($blue-600); }
.custom-container.ex    { @include box27($blue-300); }
.custom-container.sum   { @include box27($blue-400); }
.custom-container.calc  { @include box27($blue-700); }
.custom-container.ans   { @include box27($blue-700); }
.custom-container.proof { @include box27($blue-gray); }
.custom-container.term  { @include box27($blue-500); }
.custom-container.ref   { @include box27($blue-gray); }

/* 暗色で眩しい場合だけ少し減彩 */
html.dark {
  .custom-container.expl { @include box27(color.adjust($blue-300, $lightness: 6%)); }
  .custom-container.def  { @include box27(color.adjust($blue-400, $lightness: 6%)); }
}
